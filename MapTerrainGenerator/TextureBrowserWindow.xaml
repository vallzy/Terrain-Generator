<Window x:Class="MapTerrainGeneratorWPF.TextureBrowserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MapTerrainGeneratorWPF"
        Title="Texture Browser" Height="600" Width="900" WindowStartupLocation="CenterOwner" Background="#FFE5E5E5">

    <Window.Resources>
        <local:ShaderBorderConverter x:Key="ShaderBrushConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="White" BorderBrush="DarkGray" BorderThickness="0,0,1,0">
            <TreeView x:Name="treeTextureSets" SelectedItemChanged="TreeTextureSets_SelectedItemChanged" BorderThickness="0">
                <TreeView.Resources>
                    <HierarchicalDataTemplate DataType="{x:Type local:TextureGroup}" ItemsSource="{Binding Sets}">
                        <StackPanel Orientation="Horizontal" Margin="0,2">
                            <Image Source="pack://application:,,,/MapTerrainGeneratorWPF;component/FolderIcon.png" Width="16" Height="16" Margin="0,0,5,0" Visibility="Collapsed"/>
                            <TextBlock Text="{Binding Name}" FontWeight="Bold" Foreground="#FF222222"/>
                        </StackPanel>
                    </HierarchicalDataTemplate>

                    <DataTemplate DataType="{x:Type local:TextureSet}">
                        <TextBlock Text="{Binding Name}" Padding="0,2" Foreground="#FF444444"/>
                    </DataTemplate>
                </TreeView.Resources>
            </TreeView>
        </Border>

        <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch" Background="LightGray"/>

        <Grid Grid.Column="2" Background="#FF333333">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Background="#FF222222" Padding="10,5">
                <CheckBox x:Name="chkShowShaders" Content="Show Shaders Only" Foreground="White" VerticalAlignment="Center" Click="ChkShowShaders_Click"/>
            </Border>

            <ListView x:Name="lstTextures" Grid.Row="1" Background="Transparent" BorderThickness="0" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                      MouseDoubleClick="LstTextures_MouseDoubleClick" SelectionMode="Single">
                <ListView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" Width="{Binding (FrameworkElement.ActualWidth), RelativeSource={RelativeSource AncestorType=ScrollContentPresenter}}"/>
                    </ItemsPanelTemplate>
                </ListView.ItemsPanel>
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Width="130" Height="150" Margin="5" ToolTip="{Binding Name}" Background="Transparent">

                            <StackPanel.ContextMenu>
                                <ContextMenu Opened="ContextMenu_Opened">
                                    <MenuItem Header="Add to favorites" Tag="FavMenuItem" Click="MenuToggleFavorite_Click"/>
                                    <MenuItem Header="Set as Default" Click="MenuSetDefault_Click"/>
                                    <Separator/>
                                    <MenuItem Header="Shader Information" Click="MenuShaderInfo_Click"/>
                                </ContextMenu>
                            </StackPanel.ContextMenu>

                            <Border Width="100" Height="100" BorderBrush="{Binding IsShader, Converter={StaticResource ShaderBrushConverter}}" BorderThickness="2" Background="Black">
                                <Image Source="{Binding Thumbnail}" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality"/>
                            </Border>
                            <TextBlock Text="{Binding ShortName}" Foreground="White" TextAlignment="Center" TextWrapping="Wrap" Margin="0,5,0,0" FontSize="11"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <Border Grid.Row="2" Background="#FF222222" Padding="10" BorderBrush="DarkGray" BorderThickness="0,1,0,0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Apply Texture" Width="120" Height="30" Background="#FF90EE90" Click="BtnApply_Click"/>
                    <Button Content="Cancel" Width="80" Height="30" Margin="10,0,0,0" Click="BtnCancel_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>